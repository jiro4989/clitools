:toc: left
:sectnums:

= yourutils

自分用のコマンド集。

== Development

nim -v

  Nim Compiler Version 0.20.0 [Linux: amd64]
  Compiled at 2019-06-06
  Copyright (c) 2006-2019 by Andreas Rumpf

  git hash: e7471cebae2a404f3e4239f199f5a0c422484aac
  active boot switches: -d:release

nimble -v

  nimble v0.10.2 compiled at 2019-06-15 22:10:02
  git hash: couldn't determine git hash

== Usage

=== flat

標準入力ストリームを任意のカラム数に揃える。
未指定の場合は1行に揃える。

[source,bash]
----
$ seq 5 | flat
1 2 3 4 5

$ seq 5 | flat -n 2
1 2
3 4
5

$ seq 5 | flat -d ,
1,2,3,4,5
----

=== rep

文字を指定回数繰り返し出力する。
繰り返す文字は引数の最後の文字である。
最後の文字以外は繰り返しに使用するため、整数値でなければならない。
標準入力を受け付ける場合は `-i` オプションを指定する。

[source,bash]
----
$ rep 5 A
AAAAA

$ echo 'A B' | rep 5 -i
A BA BA BA BA B

$ rep 1 3 5 A
A
AAA
AAAAA

$ rep $(seq 5) A
A
AA
AAA
AAAA
AAAAA
----

=== ucut

Unicode文字で文字列を区切る。
Linuxのcutが1byte文字でしか区切れなかったので、
マルチバイト文字で区切れるようにしたかった。

[source,bash]
----
$ echo １あ２あ３ | ucut -d あ -f 1,2
１ ２
----

=== codepoint

文字のコードポイントを出力する。
10進数と16進数でそれぞれ出力する。
マルチバイト文字も出力できる。

[source,bash]
----
% echo hello world | codepoint
char code_point code_point(hex)
h 104 \U68
e 101 \U65
l 108 \U6C
l 108 \U6C
o 111 \U6F
  32 \U20
w 119 \U77
o 111 \U6F
r 114 \U72
l 108 \U6C
d 100 \U64

% ojichat | codepoint
char code_point code_point(hex)
今 20170 \U4ECA
晴 26228 \U6674
ち 12385 \U3061
ゃ 12419 \U3083
ん 12435 \U3093
、 12289 \U3001
愛 24859 \U611B
し 12375 \U3057
い 12356 \U3044
な 12394 \U306A
ぁ 12353 \U3041
も 12418 \U3082
う 12358 \U3046
（ 65288 \UFF08
笑 31505 \U7B11
） 65289 \UFF09
💕 128149 \U1F495
😚 128538 \U1F61A
😃 128515 \U1F603
☀ 9728 \U2600
  32 \U20
今 20170 \U4ECA
か 12363 \U304B
ら 12425 \U3089
寝 23517 \U5BDD
よ 12424 \U3088
う 12358 \U3046
と 12392 \U3068
思 24605 \U601D
っ 12387 \U3063
て 12390 \U3066
た 12383 \U305F
の 12398 \U306E
に 12395 \U306B
、 12289 \U3001
目 30446 \U76EE
が 12364 \U304C
覚 35226 \U899A
め 12417 \U3081
ち 12385 \U3061
ゃ 12419 \U3083
っ 12387 \U3063
た 12383 \U305F
よ 12424 \U3088
😘 128536 \U1F618
ど 12393 \U3069
う 12358 \U3046
し 12375 \U3057
て 12390 \U3066
く 12367 \U304F
れ 12428 \U308C
る 12427 \U308B
ン 12531 \U30F3
ダ 12480 \U30C0
❗ 10071 \U2757
💕 128149 \U1F495
( 40 \U28
^ 94 \U5E
_ 95 \U5F
^ 94 \U5E
) 41 \U29
----

=== align

テキストの位置を左右中央の任意の位置で揃える。
マルチバイト文字が混在したり、パディングに使用する文字にマルチバイト文字を指定しても
見た目で位置を揃えることが可能。

[source,bash]
----
% echo $'123\nあいう\nえお' | align right 
   123
あいう
  えお

% echo $'1234\nああああああ\nうえお' | align center -p =  
====1234====
ああああああ
===うえお===
----

=== aggr

TODO

[source,bash]
----
----

=== subnet

サブネットマスクを計算して出力する。
独自記法でサブネットを表現できる。

[source,bash]
----
$ subnet 100.100.200.1/24
100.100.200.1	24	01100100011001001100100000000001	11111111111111111111111100000000

$ subnet -Hc 100.100.200.1/24
IPAddr	CIDR	Bin	Mask
100.100.200.1	24	01100100011001001100100000000001	11111111111111111111111100000000

$ subnet 0-32.100.200.1/24
$ subnet -32.100.200.1/24
$ subnet 64-.100.200.1/24
$ subnet 128-.100.200.1/24
$ subnet 100.100.200.0,8,16,24/24
----

=== tb

表の入力データをMarkdown, Html, Asciidocのいずれかの形式に変換して出力する。

[source,bash]
----
$ seq 4 | xargs -I@ echo 'A,B,C,D,E' | tb -d ,
|A|B|C|D|E|
|:---:|:---:|:---:|:---:|:---:|
|A|B|C|D|E|
|A|B|C|D|E|
|A|B|C|D|E|

$ seq 4 | xargs -I@ echo 'A,B,C,D,E' | tb -d , -f asciidoc 
[options="header"]
|=================
|A|B|C|D|E
|A|B|C|D|E
|A|B|C|D|E
|A|B|C|D|E
|=================

$ seq 4 | xargs -I@ echo 'A,B,C,D,E' | tb -d , -f html
<table>
<thead>
<tr><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td></tr>
</thead>
<tbody>
<tr><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td></tr>
<tr><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td></tr>
<tr><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td></tr>
</tbody>
</table>
----

== Install

nimbleを使用して以下のコマンドでインストールする。

[source,bash]
----
git clone https://github.com/jiro4989/yourutils
cd yourutils
nimble install yourutils
----

または

https://github.com/jiro4989/yourutils/releases[Releases]ページよりダウンロードする。

== License

MIT
