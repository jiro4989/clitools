= clitools
:toc: left
:sectnums:

image:https://travis-ci.org/jiro4989/clitools.svg?branch=master["Build Status", link="https://travis-ci.org/jiro4989/clitools"]
image:https://ci.appveyor.com/api/projects/status/jic1p8fqr2m87kj7?svg=true["Build Status", link="https://ci.appveyor.com/project/jiro4989/clitools"]
image:https://github.com/jiro4989/clitools/workflows/Build%20and%20test%20Nim/badge.svg["Build Status"]

clitools is a commands.

**Developing now**

== Development

Nim 1.0.0

== Usage

=== flat

Flats.

[source,bash]
----
$ seq 5 | flat
1 2 3 4 5

$ seq 5 | flat -n 2
1 2
3 4
5

$ seq 5 | flat -d ,
1,2,3,4,5
----

=== rep

Repeat words.

[source,bash]
----
$ rep 5 A
AAAAA

$ echo 'A B' | rep 5 -i
A BA BA BA BA B

$ rep 1 3 5 A
A
AAA
AAAAA

$ rep $(seq 5) A
A
AA
AAA
AAAA
AAAAA
----

=== ucut

Unicode cut.

[source,bash]
----
$ echo １あ２あ３ | ucut -d あ -f 1,2
１ ２
----

=== codepoint

Prints code point.

[source,bash]
----
% echo hello world | codepoint
char code_point code_point(hex)
h 104 \U68
e 101 \U65
l 108 \U6C
l 108 \U6C
o 111 \U6F
  32 \U20
w 119 \U77
o 111 \U6F
r 114 \U72
l 108 \U6C
d 100 \U64
----

=== align

Align texts.

[source,bash]
----
% echo $'123\nあいう\nえお' | align right 
   123
あいう
  えお

% echo $'1234\nああああああ\nうえお' | align center -p =  
====1234====
ああああああ
===うえお===
----

=== aggr

[source,bash]
----
cat cpu.csv | aggr -d , -f 2,3
aggr -d , -f 2,3 cpu.csv mem.csv
----

=== subnet

Subnet mask. Copied from https://github.com/jiro4989/subcal.nim[subcal] repository.

[source,bash]
----
$ subnet 100.100.200.1/24
100.100.200.1	24	01100100011001001100100000000001	11111111111111111111111100000000

$ subnet -Hc 100.100.200.1/24
IPAddr	CIDR	Bin	Mask
100.100.200.1	24	01100100011001001100100000000001	11111111111111111111111100000000

$ subnet 0-32.100.200.1/24
$ subnet -32.100.200.1/24
$ subnet 64-.100.200.1/24
$ subnet 128-.100.200.1/24
$ subnet 100.100.200.0,8,16,24/24
----

=== tb

Convert from text input stream like table to Table format (markdown, html or
asciidoc). A default delimiter of input stream is the `TAB`. You can change a
default delimiter with `-d` option.

```bash
$ paste <(seq 5) <(seq 6 10) <(seq 11 15) | tb
|1|6|11|
|:---:|:---:|:---:|
|2|7|12|
|3|8|13|
|4|9|14|
|5|10|15|
```

```bash
$ paste -d , <(seq 5) <(seq 6 10) <(seq 11 15) | tb -d , -f adoc
[options="header"]
|=================
|1|6|11
|2|7|12
|3|8|13
|4|9|14
|5|10|15
|=================
```

=== renames

Rename files and directories recursively.
You can try `dry-run`.

[source,bash]
----
# Dry run is `--dry-run` or `-d`
$ renames replace --dry-run -t _ target_dir
$ renames replace -d -t _ target_dir
# You can set multiple `--from-strs` or `-f`
$ renames replace -f a -f b -f c -t "_" target_dir

# Delete whitespace
$ renames delete target_dir
# Print remaming
$ renames delete -p target_dir

# To lower
$ renames lower target_dir

# To upper
$ renames upper target_dir

----

=== zshprompt

Zsh prompt.

Prompt is here.

[source,bash]
----
17:42:12 jiro4989@jiro4989-pc ~/src/github.com/jiro4989/clitools master •
(;^q^)? ›
----

And settings of `.zshrc` .

[source,bash]
----
readonly __ZSH_PROMPT_CMD="$HOME/.nimble/bin/zshprompt"

autoload -Uz add-zsh-hook
_nicy_prompt() {
  if type "$__ZSH_PROMPT_CMD" >& /dev/null; then
    PROMPT=$("$__ZSH_PROMPT_CMD")
  fi
}
add-zsh-hook precmd _nicy_prompt
----

=== tiff

Time diff.

[source,bash]
----
$ tiff 19:00 18:00
3600 seconds

$ tiff 19:00 18:00 -H
1 hours

$ tiff 19:00 18:00 -M
60 minutes
----

=== jsonfmt

Format json from stdin.

[source,bash]
----
$ echo '{"a":1, "b":true, "c":[1, 2, 3], "d":{"a":1, "b":"test"}}' | jsonfmt
{
  "a": 1,
  "b": true,
  "c": [
    1,
    2,
    3
  ],
  "d": {
    "a": 1,
    "b": "test"
  }
}
----

== Install

[source,bash]
nimble install https://github.com/jiro4989/clitools

or

Download binary from https://github.com/jiro4989/clitools/releases[Releases].

== License

MIT
